<!DOCTYPE html>
<html lang="en">
<head>
    {% load static %}
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sharing Page</title>
    <link rel="stylesheet" href="{% static 'css/sharingpage.css' %}" />
</head>
<body>
    <nav class="navbar">
        <div class="navbar-brand"></div>
        <ul class="navbar-links">
            <li class="navbar-item"><a href="{% url 'dpi-directory' %}" class="nav-link">DPI Directory</a></li>
            <!-- <li><a href="#">Show Connections</a></li> -->
            <li><img src="{% static 'images/user_icon.png' %}" alt="User Icon" class="user-icon"></li>
        </ul>
    </nav>

    <div class="container">
        <div class="locker-name">
            <div class="loc">Locker Education</div>
            <div class="loc">Owner: Rohith</div>
            <div class="loc">This locker consists of my Education documents</div>
        </div>
        <div class="container-2 clearfix">
            <div class="a">
                <div class="res">Resources</div>
                <div class="container-3 clearfix" id="document-list">
                    <!-- Document links will be inserted here by JavaScript -->
                    <div class="aa">
                        <div class="documents"><a href="https://drive.google.com/file/d/1pe4_gNDPW9rEsgqjPrDGO9Ch1DkkkkhD/view?usp=sharing" target="_blank">Transcripts.pdf</a></div>
                        <br>
                        <div class="documents"><a href="https://drive.google.com/file/d/119LrNa1_dNeplN6BiBwHqurAU6mn_vQN/view?usp=sharing" target="_blank">10thMarks-card.pdf</a></div>
                         
                    </div>
                    
                </div>
                
                <button class="button" onclick="shareResource()">Share</button>
                &nbsp;&nbsp;&nbsp;
                <button class="button" onclick="uploadResource()">Upload Resource</button>
            </div>
            <div class="b">
                <h3 id="mycon">My Connections:</h3>
                
                    <!-- Connection details will be inserted here by JavaScript -->
                    {% comment %} {% include 'partials/user_connection_list.html' %} {% endcomment %}
                    <div class="conn">
                        <div   id="conntent">Btech Admission</div>
                        <div  id="conntent">IIITb Transcripts&lt;&gt;Rohith:Education</div>
                        
            
                        <div  id="conntent">Created On:</div>
                      
                        <div  id="conntent">Vald Until:</div>
                          
                      </div>
            
                      <div class="conn">
                        <div  id="conntent">Real Estate</div>
                        <div  id="conntent">Mantri Builder Property&lt;&gt;Rohith:Education</div>
                        
                        <div  id="conntent">Created On:</div>
                        <div id="conntent">Vald Until:</div>
                          
                      </div>
                
            </div>
        </div>
    </div>

    <!-- JavaScript for functionalities -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            fetch('/api/connections/')
                .then(response => response.text())  // Fetch as text instead of JSON
                .then(data => {
                    const connectionList = document.getElementById('connection-list');
                    connectionList.innerHTML = data;  // Assuming data is HTML
    
                    // Check if either source_user or target_user is Rohith and style accordingly
                    const cards = connectionList.querySelectorAll('.card');
                    cards.forEach(card => {
                        const sourceUser = card.querySelector('.source-user').innerText;
                        const targetUser = card.querySelector('.target-user').innerText;
    
                        if (sourceUser.trim() === "Rohith" || targetUser.trim() === "Rohith") {
                            card.classList.add('rohith-connection'); // Add a class for styling
                        }
                    });
                })
                .catch(error => console.error('Error fetching connections:', error));
        });
    </script>
    
    
</body>
</html>